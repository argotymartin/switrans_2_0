image: cirrusci/flutter:latest

stages:
  - lints
  - tests
  - build
  - deploy

before_script:
  - flutter pub get

lints:
  stage: lints
  script:
    - flutter analyze

tests:
  stage: tests
  script:
    - flutter test

build:
  stage: build
  script:
    - flutter build web

deploy:
  stage: deploy
  script:
    - cp -r build/web public
    - git push origin live